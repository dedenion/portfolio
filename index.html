<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3Dスクロールアニメーション</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik+Burned&display=swap"
      rel="stylesheet">
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.0/gsap.min.js"></script>
    <script type="module" src="/main.js"></script>
    <script src="https://unpkg.com/scrollreveal"></script>
    <script
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
      ScrollReveal({ reset: true, distance:"60px", duration:2000 });
      ScrollReveal().reveal('.text-box', { delay: 600 });
  </script>
    //ローディング画面
    <style>
      #loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #040404;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        opacity: 1;
        transition: transform 1s ease-out; /* スライドアップのトランジション設定 */
        perspective: 1000px; /* 透視効果を加えるための視点の距離 */
      }  
      
      #loading-screen h3 {
        color:rgb(230, 233, 235);
        opacity: 1;
        transition: opacity 1s ease-out;
        transform-style: preserve-3d; /* 子要素も3D変換を有効にする */
      transform-origin: center;
      transform: translateZ(0); /* 子要素が3D変換されるためには、親要素も3D変換を持つ必要がある。 */
        /*font-family: 'Rubik Burned', system-ui;*/
      }
      #content {
        display: none;
      }
      #maru {
        position: absolute;
        width: 100%;
        height: 100%;
        background: rgb(252, 254, 255);
        clip-path: circle(31.2% at 80% 14%);
        z-index: 1;
        transform-style: preserve-3d; /* 子要素も3D変換を有効にする */
      transform-origin: center;
      transform: translateZ(0); /* 子要素が3D変換されるためには、親要素も3D変換を持つ必要がある。 */
      }
      #maru1 {
        position: absolute;
        width: 100%;
        height: 100%;
        background: rgb(243, 245, 245);
        clip-path: circle(17.2% at 14% 44%);
        z-index: 1;
        transform-style: preserve-3d; /* 子要素も3D変換を有効にする */
      transform-origin: center;
      transform: translateZ(0); /* 子要素が3D変換されるためには、親要素も3D変換を持つ必要がある。 */
      }
      #maru2 {
        position: absolute;
        width: 100%;
        height: 100%;
        background: rgb(224, 226, 228);
        clip-path: circle(12.1% at 66% 73%);
        z-index: 1;
        transform-style: preserve-3d; /* 子要素も3D変換を有効にする */
      transform-origin: center;
      transform: translateZ(0); /* 子要素が3D変換されるためには、親要素も3D変換を持つ必要がある。 */
      }
      .slide-up {
        transform: translateY(-100%); /* 初期位置を画面外に設定 */
      }
    </style>
    <script>
      function getRandomColor() {
        const letters = '0123456789ABCDEF';
        let color = '#';
        for (let i = 0; i < 6; i++) {
          color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
      }
  
      function updateColor() {
        gsap.to('#loading-text', { color: getRandomColor(), duration: 1 });
        gsap.to('#maru', { backgroundColor: getRandomColor(), duration: 1 });
        gsap.to('#maru1', { backgroundColor: getRandomColor(), duration: 1 });
        gsap.to('#maru2', { backgroundColor: getRandomColor(), duration: 1 });
      }
  
      setInterval(updateColor, 1000);
  document.addEventListener("DOMContentLoaded", function () {
    const loadingScreen = document.getElementById('loading-screen');
    const content = document.getElementById('content');
    
    // GSAP アニメーションの設定
gsap.fromTo('#maru', { clipPath: 'circle(0% at 80% 14%)' }, { clipPath: 'circle(31.2% at 80% 14%)', duration: 1, ease: 'power2.inOut' });
gsap.fromTo('#maru1', { clipPath: 'circle(0% at 14% 44%)' }, { clipPath: 'circle(17.2% at 14% 44%)', duration: 1, ease: 'power2.inOut' });
gsap.fromTo('#maru2', { clipPath: 'circle(0% at 66% 73%)' }, { clipPath: 'circle(12.1% at 66% 73%)', duration: 1, ease: 'power2.inOut' });
gsap.fromTo('#loading-screen h3', { opacity: 0, fontSize: '10px' }, { opacity: 1, fontSize: '30px', duration: 1, ease: 'power2.inOut' });

    setTimeout(() => {
      // ローディング画面をフェードアウトするアニメーション
gsap.to(loadingScreen, {
  opacity: 0,
  duration: 1,
  ease: "power2.inOut",
  onComplete: () => {
    // アニメーションが完了したら非表示にする
    loadingScreen.style.display = 'none';
  }
});
    }, 3000);
  });
</script>
<script>
  $(function() {
    $('html,body').animate({
      scrollTop: 0
    });
  });

</script>


  </head>
  <body>

    <canvas id="webgl"></canvas>

    <span id="scrollProgress"></span>

    <main>
      <!-- ローディング画面 -->
      <div id="loading-screen">
        <h3 id="loading-text">Welcome<br>To My<br>Portfolio</h3>
        <div id="maru"></div>
        <div id="maru1"></div>
        <div id="maru2"></div>
      </div>
      <p id="percent">0</p>
      <p id="scroll">0</p>
      <button id="scrollButton" onclick="toggleAutoScroll()">Toggle Auto Scroll</button>

      <!--<h1>My Portfolio</h1>
      <h1>This site was made by Vite + React</h1>-->
      <section>
        <h2></h2>
      </section>
      <section>
        <div class="text-box fade-in">
          <h2>私について</h2>
          <p>名前: 重野光哉</p>
          <p>大学: 新潟大学 創生学部 創生学修課程(知能情報学科)</p>
        </div>
      </section>
      <section>
        <div class="text-box fade-in">
          <h2>趣味: 映画鑑賞、音楽、運動、モノづくり</h2>
        </div>
      </section>
      <section>
        <div class="text-box fade-in">
          <h2>開発成果</h2>
          <p>開発したサイトのURL</p>
        </div>
      </section>
      <section>
        <div class="text-box fade-in">
          <h2>研究内容</h2>
          <p>大学の研究ではこのようなことをしています。</p>
        </div>
      </section>
      <section>
        <div class="text-box fade-in">
          <h2>一番下にいます</h2>
          <p>立方体が自動回転しています</p>
          <p>上にスクロールしてアニメーションを反転できます</p>
        </div>
      </section>


    </main>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        // ScrollRevealの初期化
        ScrollReveal({ reset: true, distance: "80px", duration: 6000 });
      
        // .fade-in クラスを持つ要素をフェードインさせる
        ScrollReveal().reveal('.fade-in', { delay: 1400 });
      });
  </script>
  <script>
    let isAutoScrolling = false;
let scrollInterval;

function toggleAutoScroll() {
  if (isAutoScrolling) {
    stopAutoScroll();
  } else {
    startAutoScroll();
  }
}

function startAutoScroll() {
  isAutoScrolling = true;
  scrollInterval = setInterval(scrollPage, 20); // 20ミリ秒ごとにscrollPage関数を実行
}

function stopAutoScroll() {
  isAutoScrolling = false;
  clearInterval(scrollInterval);
}

function scrollPage() {
  // スクロールの速度や他の設定を調整する場合はここを変更
  window.scrollBy(0, 2); // 縦方向へのスクロール量を調整
}

// 必要に応じてページが読み込まれたときに実行する処理を追加する
document.addEventListener("DOMContentLoaded", function () {
  // ここに初期化などの処理を追加
});

  </script>

  </body>
</html>
